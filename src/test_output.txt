---------------------
src PlaceA dest PlaceF minimize km
---------------------
MATCH  p=(src:Place { name:'PlaceA'})-[:ROAD*1..100]->(dest:Place { name:'PlaceF'})
WHERE ALL(n IN nodes(p) WHERE 1=size(filter(m in nodes(p) WHERE m=n)))
RETURN p AS path,
reduce(km=0, r in relationships(p) | km+r.km) AS totalkm
ORDER BY totalkm ASC
LIMIT 1

---------------------
src PlaceA dest PlaceF maximize km not pass PlaceH
---------------------
MATCH  p=(src:Place { name:'PlaceA'})-[:ROAD*1..100]->(dest:Place { name:'PlaceF'})
,(nodePlaceH:Place { name:'PlaceH' })
WHERE ALL(n IN nodes(p) WHERE 1=size(filter(m in nodes(p) WHERE m=n)))
AND NONE (n IN nodes(p) WHERE n=nodePlaceH)
RETURN p AS path,
reduce(km=0, r in relationships(p) | km+r.km) AS totalkm
ORDER BY totalkm DESC
LIMIT 1

---------------------
src PlaceA dest PlaceF minimize km pass PlaceB, PlaceE
---------------------
MATCH  p=(src:Place { name:'PlaceA'})-[:ROAD*1..100]->(dest:Place { name:'PlaceF'})
,(nodePlaceB:Place { name:'PlaceB' })
,(nodePlaceE:Place { name:'PlaceE' })
WHERE ALL(n IN nodes(p) WHERE 1=size(filter(m in nodes(p) WHERE m=n)))
AND nodePlaceB IN nodes(p)
AND nodePlaceE IN nodes(p)
RETURN p AS path,
reduce(km=0, r in relationships(p) | km+r.km) AS totalkm
ORDER BY totalkm ASC
LIMIT 1

---------------------
src PlaceA cycle minlength 4 km
---------------------
MATCH path = (src:Place { name:'PlaceA'})-[r:ROAD*1..100]-(src:Place { name:'PlaceA'})
WHERE length(path)>=4
AND
ALL(x IN tail(nodes(path)) 
WHERE SINGLE(y IN tail(nodes(path)) WHERE x=y))
RETURN nodes(path),
length(path) AS length
LIMIT 1

---------------------
src PlaceA cycle minlength 4 km not pass PlaceC
---------------------
MATCH path = (src:Place { name:'PlaceA'})-[r:ROAD*1..100]-(src:Place { name:'PlaceA'})
WHERE length(path)>=4
AND
ALL(x IN tail(nodes(path)) 
WHERE SINGLE(y IN tail(nodes(path)) WHERE x=y))
RETURN nodes(path),
length(path) AS length
LIMIT 1

---------------------
src PlaceA simplecycle minlength 0 km pass c, d
---------------------
MATCH path = (src:Place { name:'PlaceA'})-[r:ROAD*1..100]-(src:Place { name:'PlaceA'})

